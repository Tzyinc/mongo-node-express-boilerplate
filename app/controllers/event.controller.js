let defaultContent = [{
  username: 'username',
  channelName: 'channel name',
  imgsrc: 'user2.svg',
  title: 'Activity Title Name Make it Longer May Longer than One Line',
  publishDate: addDays(new Date(), -3),
  startDate: new Date(),
  endDate: addDays(new Date(), 3),
  previewImg: ['Street-dance-01.jpg', 'Street-dance-01.jpg',
  'Street-dance-01.jpg', 'Street-dance-01.jpg'],
  going: 34,
  likes: 9,
  iAmGoing: true,
  iLike: true,
  iWent: false,
  content: 'Lorem ipsum dolor '
  + 'sit amet, consectetur adipiscing'
  + ' elit. Vivamus porttitor quis orci '
  + 'id tempus. Praesent ut diam tincidunt'
  + 'eleifend ante a, porta est. In hac habitasse '
  + 'platea dictumst. Aliquam ac odio odio. Vestibulum '
  + 'facilisis tortor mi, at lobortis sem pretium '
  + 'quis. Morbi tincidunt lacus vitae feugiat rhoncus. '
  + 'Donec enim quam, commodo in tellus interdum, elementum tristique erat.'
  + ' Lorem ipsum dolor '
  + 'sit amet, consectetur adipiscing'
  + ' elit. Vivamus porttitor quis orci '
  + 'id tempus. Praesent ut diam tincidunt'
  + 'eleifend ante a, porta est. In hac habitasse '
  + 'platea dictumst. Aliquam ac odio odio. Vestibulum '
  + 'facilisis tortor mi, at lobortis sem pretium '
  + 'quis. Morbi tincidunt lacus vitae feugiat rhoncus. '
  + 'Donec enim quam, commodo in tellus interdum, elementum tristique erat.'
  + ' Lorem ipsum dolor '
  + 'sit amet, consectetur adipiscing'
  + ' elit. Vivamus porttitor quis orci '
  + 'id tempus. Praesent ut diam tincidunt'
  + 'eleifend ante a, porta est. In hac habitasse '
  + 'platea dictumst. Aliquam ac odio odio. Vestibulum '
  + 'facilisis tortor mi, at lobortis sem pretium '
  + 'quis. Morbi tincidunt lacus vitae feugiat rhoncus. '
  + 'Donec enim quam, commodo in tellus interdum, elementum tristique erat.'
  + ' Lorem ipsum dolor '
  + 'sit amet, consectetur adipiscing'
  + ' elit. Vivamus porttitor quis orci '
  + 'id tempus. Praesent ut diam tincidunt'
  + 'eleifend ante a, porta est. In hac habitasse '
  + 'platea dictumst. Aliquam ac odio odio. Vestibulum '
  + 'facilisis tortor mi, at lobortis sem pretium '
  + 'quis. Morbi tincidunt lacus vitae feugiat rhoncus. '
  + 'Donec enim quam, commodo in tellus interdum, elementum tristique erat.',
  location: 'Marina Bay Sands',
  address: '10 Bayfront Ave',
  postal: 'S018956',
  comments: [
  {user: 'LittlePrince',
  userSrc: 'user2.svg',
  commentTime: addDays(new Date(), -0.0005),
  commentContent: 'Lorem ipsum dolor '
  + 'sit amet, consectetur adipiscing'
  + ' elit. Vivamus porttitor quis orci '
  + 'id tempus. Praesent ut diam tincidunt'
  + 'eleifend ante a, porta est. In hac habitasse '},
  {user: 'LittlePrince',
  userSrc: 'user2.svg',
  commentTime: addDays(new Date(), -0.2),
  commentContent: 'Lorem ipsum dolor '
  + 'sit amet, consectetur adipiscing'
  + ' elit. Vivamus porttitor quis orci '
  + 'id tempus. Praesent ut diam tincidunt'
  + 'eleifend ante a, porta est. In hac habitasse '},
  {user: 'LittlePrince',
  userSrc: 'user2.svg',
  commentTime: addDays(new Date(), -2),
  commentContent: 'Lorem ipsum dolor '
  + 'sit amet, consectetur adipiscing'
  + ' elit. Vivamus porttitor quis orci '
  + 'id tempus. Praesent ut diam tincidunt'
  + 'eleifend ante a, porta est. In hac habitasse '},
  {user: 'LittlePrincess',
  userSrc: 'user2.svg',
  commentTime: addDays(new Date(), -3),
  commentContent: 'Lorem ipsum dolor '
  + 'eleifend ante a, porta asfest. In hac habitasse '},
  {user: 'LittlePrincess',
  userSrc: 'user2.svg',
  commentTime: addDays(new Date(), -4),
  commentContent: 'Lorem ipsum dolor '
  + 'sit amet, consectetursafd adipiscing'
  + ' elit. Vivamus porttitor quis orci '},
  {user: 'LittlePrincess',
  userSrc: 'user2.svg',
  commentTime: addDays(new Date(), -4),
  commentContent: 'Lorem ipsum dolor '
  + 'sit amet, consectetur adipisfascing'
  + ' elit. Vivamus porttitor quis orci '},
  {user: 'LittlePrincess',
  userSrc: 'user2.svg',
  commentTime: addDays(new Date(), -4),
  commentContent: 'Lorem ipsum dolor '
  + ' elit. Vivamus porttitor qufais orci '},
  {user: 'LittlePrincess',
  userSrc: 'user2.svg',
  commentTime: addDays(new Date(), -4),
  commentContent: 'Lorem ipsum dolor '
  + 'sit amet, consectetur adipiscasfing'
  + ' elit. Vivamus porttitor quis orci '},,
  {user: 'LittlePrincess',
  userSrc: 'user2.svg',
  commentTime: addDays(new Date(), -4),
  commentContent: 'Lorem ipsum dolor '
  + 'sit amet, consectetur adipisfascing'
  + ' elit. Vivamus porttitor quis orci '},
  {user: 'LittlePrincess',
  userSrc: 'user2.svg',
  commentTime: addDays(new Date(), -4),
  commentContent: 'Lorem ipsum dolor '
  + ' elit. Vivamus porttitor qufais orci '},
  {user: 'LittlePrincess',
  userSrc: 'user2.svg',
  commentTime: addDays(new Date(), -4),
  commentContent: 'Lorem ipsum dolor '
  + 'sit amet, consectetur adipiscasfing'
  + ' elit. Vivamus porttitor quis orci '},
  ],
},
{
  username: 'username2',
  channelName: 'channel name2',
  imgsrc: 'user2.svg',
  title: 'some test title',
  publishDate: addDays(new Date(), -2),
  startDate: new Date(),
  endDate: new Date(),
  going: 6,
  likes: 10,
  iAmGoing: false,
  iLike: false,
  iWent: false,
  content: 'Lorem ipsum dolor '
  + 'sit amet, consectetur adipiscing'
  + ' elit. Vivamus porttitor quis orci '
  + 'id tempus. Praesent ut diam tincidunt, ',
  location: 'Ascent Building',
  address: '2 Science Park Drive',
  postal: 'S118222',
  comments: [],
}];

let returnContent = [];
let count = 0;
for (let j=0; j< 50; j++) {
  for (let i=0; i< defaultContent.length; i++) {
    let copy = Object.assign({}, defaultContent[i]);
    copy.id = count++;
    console.log(copy.id);
    returnContent.push(copy);
  }
}

/**
* @param {object} date
* @param {object} days
* @return {date}
*/
function addDays(date, days) {
  let result = new Date(date);
  result.setDate(result.getDate() + days);
  return result;
}

/**
* @param {object} req
* @param {object} res
*/
function getContent(req, res) {
  res.json(returnContent);
};

/**
* @param {object} req
* @param {object} res
*/
function getOneEvent(req, res) {
  let id = req.params.content_id;
  let returnEvent = returnContent.find((item) =>
    item.id == id);
  returnEvent.comments = returnEvent.comments.sort(
    (a, b) => (a.commentTime > b.commentTime));
  res.json(returnEvent);
};

/**
* @param {object} req
* @param {object} res
*/
function setOneEventLike(req, res) {
  let id = req.params.content_id;
  content = returnContent.find((item) =>
    item.id == id);
  content.iLike = !content.iLike;
  if (content.iLike) {
    content.likes++;
  } else {
    content.likes--;
  }
  res.json({success: true});
}

/**
* @param {object} req
* @param {object} res
*/
function setOneEventGoing(req, res) {
  let id = req.params.content_id;
  content = returnContent.find((item) =>
    item.id == id);
  content.iAmGoing = !content.iAmGoing;
  if (content.iAmGoing) {
    content.going++;
  } else {
    content.going--;
  }
  res.json({success: true});
}

/**
* @param {object} req
* @param {object} res
*/
function addNewComment(req, res) {
  let id = req.params.content_id;
  let commentDetails = req.body;
  let newComment = {user: commentDetails.user,
  userSrc: commentDetails.userSrc,
  commentTime: new Date(),
  commentContent: commentDetails.commentContent};
  content = returnContent.find((item) =>
    item.id == id);
  content.comments.push(newComment);
  res.json({success: true});
}

/**
* @param {object} req
* @param {object} res
*/
function getUserContent(req, res) {
  let likedContent = returnContent.filter((item) => item.iLike);
  let goingContent = returnContent.filter((item) => item.iAmGoing);
  let wentContent = returnContent.filter((item) => item.iWent);
  res.json({liked: likedContent, going: goingContent, went: wentContent});
}

module.exports = {
  getContent,
  getOneEvent,
  setOneEventLike,
  setOneEventGoing,
  addNewComment,
  getUserContent,
};
